{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoU,GACjW,kGACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgT,GAC7U,8EACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/app/detailer/schedule/page.tsx"],"sourcesContent":["import { requireDetailer } from '@/lib/auth';\nimport { createClient } from '@/lib/supabase/server';\nimport CalendarView from '../dashboard/CalendarView';\nimport Link from 'next/link';\n\nexport default async function SchedulePage() {\n  const profile = await requireDetailer();\n  const supabase = await createClient();\n\n  // Get detailer record\n  const { data: detailerData } = await supabase.rpc('get_detailer_by_profile', {\n    p_profile_id: null,\n  });\n\n  let myBookings: any[] = [];\n  let availabilitySlots: any[] = [];\n  let filteredBookings: any[] = [];\n\n  if (detailerData?.id) {\n    // Get all bookings assigned to this detailer\n    const { data: bookings } = await supabase\n      .from('bookings')\n      .select(\n        `\n        id,\n        receipt_id,\n        status,\n        scheduled_date,\n        scheduled_time_start,\n        scheduled_time_end,\n        scheduled_start,\n        total_amount,\n        service:service_id (id, name, price, duration_minutes),\n        car:car_id (id, make, model, year, license_plate),\n        user:user_id (id, full_name, phone, email),\n        address_line1,\n        city,\n        province,\n        postal_code\n      `\n      )\n      .eq('detailer_id', detailerData.id)\n      .in('status', ['accepted', 'in_progress', 'completed'])\n      .order('scheduled_date', { ascending: true })\n      .order('scheduled_time_start', { ascending: true });\n\n    myBookings = bookings || [];\n\n    // Get detailer availability\n    const { data: availability } = await supabase\n      .from('detailer_availability')\n      .select('*')\n      .eq('detailer_id', detailerData.id)\n      .eq('is_active', true);\n\n    availabilitySlots = availability || [];\n\n    // Filter bookings to only show those within availability windows (optional)\n    filteredBookings = myBookings;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#050B12] text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Schedule</h1>\n          <p className=\"text-[#C6CFD9]\">View and manage your job schedule</p>\n        </div>\n\n        {/* Calendar View */}\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6 mb-8\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold text-white\">Calendar</h2>\n            <Link\n              href=\"/detailer/availability\"\n              className=\"text-sm text-[#32CE7A] hover:text-[#6FF0C4] font-medium\"\n            >\n              Manage Availability â†’\n            </Link>\n          </div>\n          <CalendarView bookings={filteredBookings} />\n        </div>\n\n        {/* Upcoming Bookings List */}\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n          <h2 className=\"text-xl font-semibold text-white mb-4\">Upcoming Bookings</h2>\n          {filteredBookings.length === 0 ? (\n            <p className=\"text-[#C6CFD9]\">No upcoming bookings</p>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredBookings.slice(0, 10).map((booking) => (\n                <Link\n                  key={booking.id}\n                  href={`/detailer/bookings/${booking.id}`}\n                  className=\"block bg-[#050B12] border border-white/5 rounded-lg p-4 hover:border-[#6FF0C4]/20 transition-colors\"\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <div className=\"font-semibold text-white\">\n                        {booking.car?.make} {booking.car?.model} {booking.car?.year}\n                      </div>\n                      <div className=\"text-sm text-[#C6CFD9] mt-1\">\n                        {booking.service?.name} - {booking.user?.full_name}\n                      </div>\n                      <div className=\"text-sm text-[#C6CFD9] mt-1\">\n                        {booking.scheduled_date && booking.scheduled_time_start\n                          ? `${new Date(booking.scheduled_date).toLocaleDateString()} at ${booking.scheduled_time_start.substring(0, 5)}`\n                          : booking.scheduled_start\n                          ? new Date(booking.scheduled_start).toLocaleString()\n                          : 'Date TBD'}\n                      </div>\n                      {booking.address_line1 && (\n                        <div className=\"text-xs text-[#C6CFD9] mt-1\">\n                          {booking.address_line1}, {booking.city}\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-white font-semibold\">\n                        ${booking.service?.price || booking.total_amount || 0}\n                      </div>\n                      <div className=\"text-xs text-[#C6CFD9] mt-1 capitalize\">{booking.status}</div>\n                    </div>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,gKAAe;IACrC,MAAM,WAAW,MAAM,IAAA,2KAAY;IAEnC,sBAAsB;IACtB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAAS,GAAG,CAAC,2BAA2B;QAC3E,cAAc;IAChB;IAEA,IAAI,aAAoB,EAAE;IAC1B,IAAI,oBAA2B,EAAE;IACjC,IAAI,mBAA0B,EAAE;IAEhC,IAAI,cAAc,IAAI;QACpB,6CAA6C;QAC7C,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,YACL,MAAM,CACL,CAAC;;;;;;;;;;;;;;;;MAgBH,CAAC,EAEA,EAAE,CAAC,eAAe,aAAa,EAAE,EACjC,EAAE,CAAC,UAAU;YAAC;YAAY;YAAe;SAAY,EACrD,KAAK,CAAC,kBAAkB;YAAE,WAAW;QAAK,GAC1C,KAAK,CAAC,wBAAwB;YAAE,WAAW;QAAK;QAEnD,aAAa,YAAY,EAAE;QAE3B,4BAA4B;QAC5B,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,yBACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,aAAa,EAAE,EACjC,EAAE,CAAC,aAAa;QAEnB,oBAAoB,gBAAgB,EAAE;QAEtC,4EAA4E;QAC5E,mBAAmB;IACrB;IAEA,qBACE,gRAAC;QAAI,WAAU;kBACb,cAAA,gRAAC;YAAI,WAAU;;8BACb,gRAAC;oBAAI,WAAU;;sCACb,gRAAC;4BAAG,WAAU;sCAAqC;;;;;;sCACnD,gRAAC;4BAAE,WAAU;sCAAiB;;;;;;;;;;;;8BAIhC,gRAAC;oBAAI,WAAU;;sCACb,gRAAC;4BAAI,WAAU;;8CACb,gRAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,gRAAC,4NAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;sCAIH,gRAAC,0LAAY;4BAAC,UAAU;;;;;;;;;;;;8BAI1B,gRAAC;oBAAI,WAAU;;sCACb,gRAAC;4BAAG,WAAU;sCAAwC;;;;;;wBACrD,iBAAiB,MAAM,KAAK,kBAC3B,gRAAC;4BAAE,WAAU;sCAAiB;;;;;iDAE9B,gRAAC;4BAAI,WAAU;sCACZ,iBAAiB,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,wBAClC,gRAAC,4NAAI;oCAEH,MAAM,CAAC,mBAAmB,EAAE,QAAQ,EAAE,EAAE;oCACxC,WAAU;8CAEV,cAAA,gRAAC;wCAAI,WAAU;;0DACb,gRAAC;;kEACC,gRAAC;wDAAI,WAAU;;4DACZ,QAAQ,GAAG,EAAE;4DAAK;4DAAE,QAAQ,GAAG,EAAE;4DAAM;4DAAE,QAAQ,GAAG,EAAE;;;;;;;kEAEzD,gRAAC;wDAAI,WAAU;;4DACZ,QAAQ,OAAO,EAAE;4DAAK;4DAAI,QAAQ,IAAI,EAAE;;;;;;;kEAE3C,gRAAC;wDAAI,WAAU;kEACZ,QAAQ,cAAc,IAAI,QAAQ,oBAAoB,GACnD,GAAG,IAAI,KAAK,QAAQ,cAAc,EAAE,kBAAkB,GAAG,IAAI,EAAE,QAAQ,oBAAoB,CAAC,SAAS,CAAC,GAAG,IAAI,GAC7G,QAAQ,eAAe,GACvB,IAAI,KAAK,QAAQ,eAAe,EAAE,cAAc,KAChD;;;;;;oDAEL,QAAQ,aAAa,kBACpB,gRAAC;wDAAI,WAAU;;4DACZ,QAAQ,aAAa;4DAAC;4DAAG,QAAQ,IAAI;;;;;;;;;;;;;0DAI5C,gRAAC;gDAAI,WAAU;;kEACb,gRAAC;wDAAI,WAAU;;4DAA2B;4DACtC,QAAQ,OAAO,EAAE,SAAS,QAAQ,YAAY,IAAI;;;;;;;kEAEtD,gRAAC;wDAAI,WAAU;kEAA0C,QAAQ,MAAM;;;;;;;;;;;;;;;;;;mCA7BtE,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCjC"}}]
}
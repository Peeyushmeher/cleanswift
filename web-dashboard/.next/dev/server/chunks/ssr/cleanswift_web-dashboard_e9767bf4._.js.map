{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            );\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  );\n}\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4KAAO;IAEjC,OAAO,IAAA,iOAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/lib/auth.ts"],"sourcesContent":["import { createClient } from './supabase/server';\nimport { redirect } from 'next/navigation';\nimport { getDetailerMode as getMode } from './detailer/mode-detection';\n\nexport interface UserProfile {\n  id: string;\n  full_name: string;\n  email: string;\n  phone: string;\n  role: 'user' | 'detailer' | 'admin';\n  avatar_url: string | null;\n}\n\n/**\n * Get the current user's session and profile\n */\nexport async function getSession() {\n  const supabase = await createClient();\n  const {\n    data: { session },\n  } = await supabase.auth.getSession();\n  return session;\n}\n\n/**\n * Get the current user's profile with role\n */\nexport async function getUserProfile(): Promise<UserProfile | null> {\n  const supabase = await createClient();\n  const session = await getSession();\n\n  if (!session?.user) {\n    return null;\n  }\n\n  const { data, error } = await supabase\n    .from('profiles')\n    .select('id, full_name, email, phone, role, avatar_url')\n    .eq('id', session.user.id)\n    .single();\n\n  if (error || !data) {\n    return null;\n  }\n\n  return data as UserProfile;\n}\n\n/**\n * Check if user is authenticated, redirect to login if not\n */\nexport async function requireAuth() {\n  const session = await getSession();\n  if (!session) {\n    redirect('/auth/login');\n  }\n  return session;\n}\n\n/**\n * Check if user has detailer role, redirect if not\n */\nexport async function requireDetailer() {\n  const profile = await getUserProfile();\n  if (!profile || (profile.role !== 'detailer' && profile.role !== 'admin')) {\n    redirect('/auth/login');\n  }\n  return profile;\n}\n\n/**\n * Check if user has admin role, redirect if not\n */\nexport async function requireAdmin() {\n  const profile = await getUserProfile();\n  if (!profile || profile.role !== 'admin') {\n    redirect('/auth/login');\n  }\n  return profile;\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AAAA;;;AAeO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,2KAAY;IACnC,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAClC,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,2KAAY;IACnC,MAAM,UAAU,MAAM;IAEtB,IAAI,CAAC,SAAS,MAAM;QAClB,OAAO;IACT;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,iDACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;IAET,IAAI,SAAS,CAAC,MAAM;QAClB,OAAO;IACT;IAEA,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,IAAI,CAAC,SAAS;QACZ,IAAA,mOAAQ,EAAC;IACX;IACA,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,IAAI,CAAC,WAAY,QAAQ,IAAI,KAAK,cAAc,QAAQ,IAAI,KAAK,SAAU;QACzE,IAAA,mOAAQ,EAAC;IACX;IACA,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,IAAI,CAAC,WAAW,QAAQ,IAAI,KAAK,SAAS;QACxC,IAAA,mOAAQ,EAAC;IACX;IACA,OAAO;AACT"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/components/detailer/Sidebar.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/components/detailer/Sidebar.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA4T,GACzV,0FACA","ignoreList":[0]}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/components/detailer/Sidebar.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/components/detailer/Sidebar.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/components/detailer/Header.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/components/detailer/Header.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2T,GACxV,yFACA","ignoreList":[0]}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/cleanswift/web-dashboard/components/detailer/Header.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cleanswift/web-dashboard/components/detailer/Header.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,0SAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuS,GACpU,qEACA","ignoreList":[0]}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/app/detailer/layout.tsx"],"sourcesContent":["import { requireDetailer } from '@/lib/auth';\nimport Sidebar from '@/components/detailer/Sidebar';\nimport Header from '@/components/detailer/Header';\n\nexport default async function DetailerLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  await requireDetailer();\n\n  return (\n    <div className=\"min-h-screen bg-[#050B12] text-white flex\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col\">\n        <Header />\n        <main className=\"flex-1 overflow-y-auto\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,eAAe,eAAe,EAC3C,QAAQ,EAGT;IACC,MAAM,IAAA,gKAAe;IAErB,qBACE,gRAAC;QAAI,WAAU;;0BACb,gRAAC,+KAAO;;;;;0BACR,gRAAC;gBAAI,WAAU;;kCACb,gRAAC,8KAAM;;;;;kCACP,gRAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX"}}]
}
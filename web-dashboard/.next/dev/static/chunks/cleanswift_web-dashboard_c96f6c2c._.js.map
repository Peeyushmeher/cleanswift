{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/lib/detailer/dashboard-utils.ts"],"sourcesContent":["// Utility functions for Detailer Dashboard\n\n/**\n * Format a number as currency\n */\nexport function formatCurrency(amount: number | string): string {\n  const num = typeof amount === 'string' ? parseFloat(amount) : amount;\n  if (isNaN(num)) return '$0.00';\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(num);\n}\n\n/**\n * Format a date string to a readable format\n */\nexport function formatDate(date: string | Date, format: 'short' | 'long' | 'time' = 'short'): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  \n  if (format === 'time') {\n    return d.toLocaleTimeString('en-US', { \n      hour: 'numeric', \n      minute: '2-digit',\n      hour12: true \n    });\n  }\n  \n  if (format === 'long') {\n    return d.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n    });\n  }\n  \n  return d.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\n/**\n * Format a date and time together\n */\nexport function formatDateTime(date: string, time: string): string {\n  const dateObj = new Date(`${date}T${time}`);\n  return formatDate(dateObj, 'long');\n}\n\n/**\n * Calculate total earnings from bookings\n */\nexport function calculateEarnings(bookings: Array<{ total_amount?: number; service_price?: number }>): number {\n  return bookings.reduce((sum, booking) => {\n    const amount = booking.total_amount || booking.service_price || 0;\n    return sum + (typeof amount === 'string' ? parseFloat(amount) : amount);\n  }, 0);\n}\n\n/**\n * Calculate distance between two coordinates (Haversine formula)\n * Returns distance in kilometers\n */\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371; // Radius of the Earth in kilometers\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  \n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) *\n      Math.cos(toRad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  \n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const distance = R * c;\n  \n  return Math.round(distance * 10) / 10; // Round to 1 decimal place\n}\n\n/**\n * Convert degrees to radians\n */\nfunction toRad(degrees: number): number {\n  return degrees * (Math.PI / 180);\n}\n\n/**\n * Format distance with unit\n */\nexport function formatDistance(km: number): string {\n  if (km < 1) {\n    return `${Math.round(km * 1000)}m`;\n  }\n  return `${km}km`;\n}\n\n/**\n * Get status color class\n */\nexport function getStatusColor(status: string): string {\n  switch (status) {\n    case 'accepted':\n      return 'bg-[#1DA4F3]/20 border-[#1DA4F3]/40 text-[#1DA4F3]';\n    case 'in_progress':\n      return 'bg-[#6FF0C4]/20 border-[#6FF0C4]/40 text-[#6FF0C4]';\n    case 'completed':\n      return 'bg-[#32CE7A]/20 border-[#32CE7A]/40 text-[#32CE7A]';\n    case 'cancelled':\n    case 'no_show':\n      return 'bg-red-500/20 border-red-500/40 text-red-400';\n    case 'paid':\n    case 'offered':\n      return 'bg-yellow-500/20 border-yellow-500/40 text-yellow-400';\n    default:\n      return 'bg-[#C6CFD9]/20 border-[#C6CFD9]/40 text-[#C6CFD9]';\n  }\n}\n\n/**\n * Get payment status color class\n */\nexport function getPaymentStatusColor(status: string): string {\n  switch (status) {\n    case 'paid':\n      return 'text-[#32CE7A]';\n    case 'processing':\n      return 'text-yellow-400';\n    case 'failed':\n    case 'refunded':\n      return 'text-red-400';\n    default:\n      return 'text-[#C6CFD9]';\n  }\n}\n\n/**\n * Filter bookings by date range\n */\nexport function filterBookingsByDateRange(\n  bookings: Array<{ scheduled_date?: string; scheduled_start?: string }>,\n  range: 'today' | 'tomorrow' | 'this_week' | 'this_month' | 'all'\n): Array<any> {\n  if (range === 'all') return bookings;\n  \n  const now = new Date();\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n  \n  return bookings.filter((booking) => {\n    const bookingDate = booking.scheduled_date \n      ? new Date(booking.scheduled_date)\n      : booking.scheduled_start \n      ? new Date(booking.scheduled_start)\n      : null;\n    \n    if (!bookingDate) return false;\n    \n    const bookingDateOnly = new Date(\n      bookingDate.getFullYear(),\n      bookingDate.getMonth(),\n      bookingDate.getDate()\n    );\n    \n    switch (range) {\n      case 'today':\n        return bookingDateOnly.getTime() === today.getTime();\n      \n      case 'tomorrow':\n        const tomorrow = new Date(today);\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        return bookingDateOnly.getTime() === tomorrow.getTime();\n      \n      case 'this_week':\n        const weekStart = new Date(today);\n        weekStart.setDate(today.getDate() - today.getDay());\n        const weekEnd = new Date(weekStart);\n        weekEnd.setDate(weekStart.getDate() + 6);\n        return bookingDate >= weekStart && bookingDate <= weekEnd;\n      \n      case 'this_month':\n        return (\n          bookingDate.getMonth() === today.getMonth() &&\n          bookingDate.getFullYear() === today.getFullYear()\n        );\n      \n      default:\n        return true;\n    }\n  });\n}\n\n/**\n * Sort bookings\n */\nexport function sortBookings(\n  bookings: Array<any>,\n  sortBy: 'time' | 'distance' | 'price' | 'rating' | 'assignment'\n): Array<any> {\n  const sorted = [...bookings];\n  \n  switch (sortBy) {\n    case 'time':\n      return sorted.sort((a, b) => {\n        const dateA = a.scheduled_date || a.scheduled_start || '';\n        const dateB = b.scheduled_date || b.scheduled_start || '';\n        return new Date(dateA).getTime() - new Date(dateB).getTime();\n      });\n    \n    case 'price':\n      return sorted.sort((a, b) => {\n        const priceA = a.total_amount || a.service_price || 0;\n        const priceB = b.total_amount || b.service_price || 0;\n        return priceB - priceA;\n      });\n    \n    case 'distance':\n      // This would require current location\n      return sorted;\n    \n    case 'rating':\n      // This would require customer rating\n      return sorted;\n    \n    case 'assignment':\n      return sorted.sort((a, b) => {\n        const dateA = new Date(a.created_at || 0).getTime();\n        const dateB = new Date(b.created_at || 0).getTime();\n        return dateB - dateA;\n      });\n    \n    default:\n      return sorted;\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/EarningsChart.tsx"],"sourcesContent":["'use client';\n\ninterface EarningsData {\n  date: string;\n  amount: number;\n}\n\ninterface EarningsChartProps {\n  data: EarningsData[];\n  period: 'day' | 'week' | 'month';\n}\n\nexport default function EarningsChart({ data, period }: EarningsChartProps) {\n  if (data.length === 0) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-[#C6CFD9]\">\n        No earnings data available\n      </div>\n    );\n  }\n\n  const maxAmount = Math.max(...data.map(d => d.amount), 0);\n\n  return (\n    <div className=\"h-64 relative\">\n      <div className=\"absolute inset-0 flex items-end justify-between gap-1\">\n        {data.map((item, index) => {\n          const height = maxAmount > 0 ? (item.amount / maxAmount) * 100 : 0;\n          return (\n            <div\n              key={index}\n              className=\"flex-1 flex flex-col items-center gap-1\"\n            >\n              <div\n                className=\"w-full bg-[#32CE7A] rounded-t transition-all hover:bg-[#6FF0C4] relative group\"\n                style={{ height: `${height}%` }}\n              >\n                <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-[#0A1A2F] border border-white/5 rounded text-xs text-white opacity-0 group-hover:opacity-100 whitespace-nowrap\">\n                  ${item.amount.toFixed(2)}\n                </div>\n              </div>\n              <div className=\"text-xs text-[#C6CFD9] transform -rotate-45 origin-left whitespace-nowrap\">\n                {new Date(item.date).toLocaleDateString('en-US', {\n                  month: 'short',\n                  day: 'numeric',\n                })}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      {/* Y-axis labels */}\n      <div className=\"absolute left-0 top-0 bottom-8 flex flex-col justify-between text-xs text-[#C6CFD9]\">\n        <span>${maxAmount.toFixed(0)}</span>\n        <span>${Math.floor(maxAmount / 2).toFixed(0)}</span>\n        <span>$0</span>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;;AAYe,SAAS,cAAc,EAAE,IAAI,EAAE,MAAM,EAAsB;IACxE,IAAI,KAAK,MAAM,KAAK,GAAG;QACrB,qBACE,+NAAC;YAAI,WAAU;sBAAuD;;;;;;IAI1E;IAEA,MAAM,YAAY,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,GAAG;IAEvD,qBACE,+NAAC;QAAI,WAAU;;0BACb,+NAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAC,MAAM;oBACf,MAAM,SAAS,YAAY,IAAI,AAAC,KAAK,MAAM,GAAG,YAAa,MAAM;oBACjE,qBACE,+NAAC;wBAEC,WAAU;;0CAEV,+NAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,QAAQ,GAAG,OAAO,CAAC,CAAC;gCAAC;0CAE9B,cAAA,+NAAC;oCAAI,WAAU;;wCAA4L;wCACvM,KAAK,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;0CAG1B,+NAAC;gCAAI,WAAU;0CACZ,IAAI,KAAK,KAAK,IAAI,EAAE,kBAAkB,CAAC,SAAS;oCAC/C,OAAO;oCACP,KAAK;gCACP;;;;;;;uBAfG;;;;;gBAmBX;;;;;;0BAGF,+NAAC;gBAAI,WAAU;;kCACb,+NAAC;;4BAAK;4BAAE,UAAU,OAAO,CAAC;;;;;;;kCAC1B,+NAAC;;4BAAK;4BAAE,KAAK,KAAK,CAAC,YAAY,GAAG,OAAO,CAAC;;;;;;;kCAC1C,+NAAC;kCAAK;;;;;;;;;;;;;;;;;;AAId;KA/CwB"}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/OrgEarningsSummary.tsx"],"sourcesContent":["'use client';\n\nimport { formatCurrency } from '@/lib/detailer/dashboard-utils';\n\ninterface OrgEarningsSummaryProps {\n  grossRevenue: number;\n  netRevenue: number;\n  platformFee: number;\n  totalJobs: number;\n}\n\nexport default function OrgEarningsSummary({\n  grossRevenue,\n  netRevenue,\n  platformFee,\n  totalJobs,\n}: OrgEarningsSummaryProps) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <div className=\"text-[#C6CFD9] text-sm mb-2\">Gross Revenue</div>\n        <div className=\"text-3xl font-bold text-white\">{formatCurrency(grossRevenue)}</div>\n      </div>\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <div className=\"text-[#C6CFD9] text-sm mb-2\">Net Revenue</div>\n        <div className=\"text-3xl font-bold text-[#32CE7A]\">{formatCurrency(netRevenue)}</div>\n      </div>\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <div className=\"text-[#C6CFD9] text-sm mb-2\">Platform Fee</div>\n        <div className=\"text-3xl font-bold text-yellow-400\">{formatCurrency(platformFee)}</div>\n      </div>\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <div className=\"text-[#C6CFD9] text-sm mb-2\">Total Jobs</div>\n        <div className=\"text-3xl font-bold text-white\">{totalJobs}</div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWe,SAAS,mBAAmB,EACzC,YAAY,EACZ,UAAU,EACV,WAAW,EACX,SAAS,EACe;IACxB,qBACE,+NAAC;QAAI,WAAU;;0BACb,+NAAC;gBAAI,WAAU;;kCACb,+NAAC;wBAAI,WAAU;kCAA8B;;;;;;kCAC7C,+NAAC;wBAAI,WAAU;kCAAiC,IAAA,4LAAc,EAAC;;;;;;;;;;;;0BAEjE,+NAAC;gBAAI,WAAU;;kCACb,+NAAC;wBAAI,WAAU;kCAA8B;;;;;;kCAC7C,+NAAC;wBAAI,WAAU;kCAAqC,IAAA,4LAAc,EAAC;;;;;;;;;;;;0BAErE,+NAAC;gBAAI,WAAU;;kCACb,+NAAC;wBAAI,WAAU;kCAA8B;;;;;;kCAC7C,+NAAC;wBAAI,WAAU;kCAAsC,IAAA,4LAAc,EAAC;;;;;;;;;;;;0BAEtE,+NAAC;gBAAI,WAAU;;kCACb,+NAAC;wBAAI,WAAU;kCAA8B;;;;;;kCAC7C,+NAAC;wBAAI,WAAU;kCAAiC;;;;;;;;;;;;;;;;;;AAIxD;KA1BwB"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/TeamEarningsBreakdown.tsx"],"sourcesContent":["'use client';\n\nimport { formatCurrency } from '@/lib/detailer/dashboard-utils';\nimport Link from 'next/link';\n\ninterface TeamEarnings {\n  name: string;\n  revenue: number;\n  jobs: number;\n}\n\ninterface TeamEarningsBreakdownProps {\n  teams: TeamEarnings[];\n}\n\nexport default function TeamEarningsBreakdown({ teams }: TeamEarningsBreakdownProps) {\n  if (teams.length === 0) {\n    return (\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Team Earnings Breakdown</h2>\n        <p className=\"text-[#C6CFD9]\">No team earnings data available</p>\n      </div>\n    );\n  }\n\n  const averagePerJob = teams.reduce((sum, t) => sum + (t.revenue / t.jobs || 0), 0) / teams.length;\n\n  return (\n    <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n      <h2 className=\"text-xl font-semibold text-white mb-4\">Team Earnings Breakdown</h2>\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"border-b border-white/5\">\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Team\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Jobs\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Revenue\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Average\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-white/5\">\n            {teams.map((team, idx) => (\n              <tr key={idx} className=\"hover:bg-white/5\">\n                <td className=\"px-4 py-3 text-sm text-white font-medium\">{team.name}</td>\n                <td className=\"px-4 py-3 text-sm text-white\">{team.jobs}</td>\n                <td className=\"px-4 py-3 text-sm text-[#32CE7A] font-semibold\">\n                  {formatCurrency(team.revenue)}\n                </td>\n                <td className=\"px-4 py-3 text-sm text-white\">\n                  {formatCurrency(team.jobs > 0 ? team.revenue / team.jobs : 0)}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAee,SAAS,sBAAsB,EAAE,KAAK,EAA8B;IACjF,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,+NAAC;YAAI,WAAU;;8BACb,+NAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,+NAAC;oBAAE,WAAU;8BAAiB;;;;;;;;;;;;IAGpC;IAEA,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,OAAO,GAAG,EAAE,IAAI,IAAI,CAAC,GAAG,KAAK,MAAM,MAAM;IAEjG,qBACE,+NAAC;QAAI,WAAU;;0BACb,+NAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,+NAAC;gBAAI,WAAU;0BACb,cAAA,+NAAC;oBAAM,WAAU;;sCACf,+NAAC;sCACC,cAAA,+NAAC;gCAAG,WAAU;;kDACZ,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;;;;;;;;;;;;sCAKvF,+NAAC;4BAAM,WAAU;sCACd,MAAM,GAAG,CAAC,CAAC,MAAM,oBAChB,+NAAC;oCAAa,WAAU;;sDACtB,+NAAC;4CAAG,WAAU;sDAA4C,KAAK,IAAI;;;;;;sDACnE,+NAAC;4CAAG,WAAU;sDAAgC,KAAK,IAAI;;;;;;sDACvD,+NAAC;4CAAG,WAAU;sDACX,IAAA,4LAAc,EAAC,KAAK,OAAO;;;;;;sDAE9B,+NAAC;4CAAG,WAAU;sDACX,IAAA,4LAAc,EAAC,KAAK,IAAI,GAAG,IAAI,KAAK,OAAO,GAAG,KAAK,IAAI,GAAG;;;;;;;mCAPtD;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBvB;KAnDwB"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/components/detailer/PayoutBatches.tsx"],"sourcesContent":["'use client';\n\nimport { formatCurrency, formatDate } from '@/lib/detailer/dashboard-utils';\n\ninterface PayoutBatch {\n  id: string;\n  batch_date: string;\n  total_jobs: number;\n  total_amount: number;\n  stripe_payout_id: string | null;\n  created_at: string;\n}\n\ninterface PayoutBatchesProps {\n  batches: PayoutBatch[];\n}\n\nexport default function PayoutBatches({ batches }: PayoutBatchesProps) {\n  if (batches.length === 0) {\n    return (\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Payout Batches</h2>\n        <p className=\"text-[#C6CFD9]\">No payout batches yet</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n      <h2 className=\"text-xl font-semibold text-white mb-4\">Payout Batches</h2>\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"border-b border-white/5\">\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Date\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Jobs\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Amount\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                Status\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-white/5\">\n            {batches.map((batch) => (\n              <tr key={batch.id} className=\"hover:bg-white/5\">\n                <td className=\"px-4 py-3 text-sm text-white\">\n                  {formatDate(batch.batch_date, 'short')}\n                </td>\n                <td className=\"px-4 py-3 text-sm text-white\">{batch.total_jobs}</td>\n                <td className=\"px-4 py-3 text-sm text-[#32CE7A] font-semibold\">\n                  {formatCurrency(batch.total_amount)}\n                </td>\n                <td className=\"px-4 py-3 text-sm\">\n                  <span\n                    className={`px-2 py-1 rounded text-xs font-medium ${\n                      batch.stripe_payout_id\n                        ? 'bg-[#32CE7A]/20 text-[#32CE7A]'\n                        : 'bg-yellow-500/20 text-yellow-400'\n                    }`}\n                  >\n                    {batch.stripe_payout_id ? 'Paid' : 'Pending'}\n                  </span>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAiBe,SAAS,cAAc,EAAE,OAAO,EAAsB;IACnE,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,qBACE,+NAAC;YAAI,WAAU;;8BACb,+NAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,+NAAC;oBAAE,WAAU;8BAAiB;;;;;;;;;;;;IAGpC;IAEA,qBACE,+NAAC;QAAI,WAAU;;0BACb,+NAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,+NAAC;gBAAI,WAAU;0BACb,cAAA,+NAAC;oBAAM,WAAU;;sCACf,+NAAC;sCACC,cAAA,+NAAC;gCAAG,WAAU;;kDACZ,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;kDAGnF,+NAAC;wCAAG,WAAU;kDAAqE;;;;;;;;;;;;;;;;;sCAKvF,+NAAC;4BAAM,WAAU;sCACd,QAAQ,GAAG,CAAC,CAAC,sBACZ,+NAAC;oCAAkB,WAAU;;sDAC3B,+NAAC;4CAAG,WAAU;sDACX,IAAA,wLAAU,EAAC,MAAM,UAAU,EAAE;;;;;;sDAEhC,+NAAC;4CAAG,WAAU;sDAAgC,MAAM,UAAU;;;;;;sDAC9D,+NAAC;4CAAG,WAAU;sDACX,IAAA,4LAAc,EAAC,MAAM,YAAY;;;;;;sDAEpC,+NAAC;4CAAG,WAAU;sDACZ,cAAA,+NAAC;gDACC,WAAW,CAAC,sCAAsC,EAChD,MAAM,gBAAgB,GAClB,mCACA,oCACJ;0DAED,MAAM,gBAAgB,GAAG,SAAS;;;;;;;;;;;;mCAhBhC,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0B/B;KA3DwB"}},
    {"offset": {"line": 810, "column": 0}, "map": {"version":3,"sources":["file:///Users/camps/cleanswift/web-dashboard/app/detailer/earnings/EarningsPageClient.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { formatCurrency, formatDate } from '@/lib/detailer/dashboard-utils';\nimport EarningsChart from '@/components/detailer/EarningsChart';\nimport OrgEarningsSummary from '@/components/detailer/OrgEarningsSummary';\nimport TeamEarningsBreakdown from '@/components/detailer/TeamEarningsBreakdown';\nimport PayoutBatches from '@/components/detailer/PayoutBatches';\n\ninterface EarningsPageClientProps {\n  earningsData: any[];\n  totalEarnings: number;\n  pendingPayouts: number;\n  mode?: 'solo' | 'organization';\n  orgEarnings?: {\n    grossRevenue: number;\n    netRevenue: number;\n    platformFee: number;\n    totalJobs: number;\n  } | null;\n  teamEarnings?: Array<{ name: string; revenue: number; jobs: number }>;\n  payoutBatches?: any[];\n}\n\nexport default function EarningsPageClient({\n  earningsData,\n  totalEarnings,\n  pendingPayouts,\n  mode = 'solo',\n  orgEarnings,\n  teamEarnings = [],\n  payoutBatches = [],\n}: EarningsPageClientProps) {\n  const [period, setPeriod] = useState<'day' | 'week' | 'month'>('day');\n\n  // Prepare chart data\n  const chartData = earningsData.slice(0, 7).map((booking) => ({\n    date: booking.completed_at || booking.scheduled_date || booking.created_at,\n    amount: booking.total_amount || booking.service_price || 0,\n  }));\n\n  const isOrgMode = mode === 'organization' && orgEarnings;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Summary Cards */}\n      {isOrgMode ? (\n        <OrgEarningsSummary\n          grossRevenue={orgEarnings.grossRevenue}\n          netRevenue={orgEarnings.netRevenue}\n          platformFee={orgEarnings.platformFee}\n          totalJobs={orgEarnings.totalJobs}\n        />\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n          <div className=\"text-[#C6CFD9] text-sm mb-2\">Total Earnings</div>\n          <div className=\"text-3xl font-bold text-[#32CE7A]\">\n            {formatCurrency(totalEarnings)}\n          </div>\n        </div>\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n          <div className=\"text-[#C6CFD9] text-sm mb-2\">Pending Payouts</div>\n          <div className=\"text-3xl font-bold text-yellow-400\">\n            {formatCurrency(pendingPayouts)}\n          </div>\n        </div>\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n          <div className=\"text-[#C6CFD9] text-sm mb-2\">Next Payout</div>\n          <div className=\"text-lg font-semibold text-[#C6CFD9]\">\n            TBD (Stripe Connect)\n          </div>\n        </div>\n        </div>\n      )}\n\n      {/* Team Earnings Breakdown (Org Mode) */}\n      {isOrgMode && teamEarnings.length > 0 && (\n        <TeamEarningsBreakdown teams={teamEarnings} />\n      )}\n\n      {/* Payout Batches (Org Mode) */}\n      {isOrgMode && payoutBatches.length > 0 && (\n        <PayoutBatches batches={payoutBatches} />\n      )}\n\n      {/* Earnings Chart */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Earnings Overview</h2>\n        <EarningsChart data={chartData} period={period} />\n      </div>\n\n      {/* Earnings Table */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Earnings Breakdown</h2>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-white/5\">\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Date\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Job ID\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Service\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Customer\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Amount\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-[#C6CFD9] uppercase\">\n                  Payout\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-white/5\">\n              {earningsData.map((booking) => {\n                const amount = booking.total_amount || booking.service_price || 0;\n                const payout = amount * 0.9; // 10% platform fee\n                return (\n                  <tr key={booking.id} className=\"hover:bg-white/5\">\n                    <td className=\"px-4 py-3 text-sm text-white\">\n                      {formatDate(booking.completed_at || booking.scheduled_date, 'short')}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-[#C6CFD9] font-mono\">\n                      {booking.receipt_id}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-white\">\n                      {booking.service?.name || 'N/A'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-white\">\n                      {booking.user?.full_name || 'N/A'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-white\">\n                      {formatCurrency(amount)}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-[#32CE7A] font-semibold\">\n                      {formatCurrency(payout)}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n          {earningsData.length === 0 && (\n            <div className=\"text-center py-12 text-[#C6CFD9]\">\n              No earnings yet\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85096,e=>{"use strict";var t=e.i(84394),a=e.i(67589),i=e.i(76708),s=e.i(50067);let r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function l(){let[e,l]=(0,a.useState)([]),[d,n]=(0,a.useState)(!0),[c,o]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null);(0,s.useRouter)();let x=(0,i.createClient)();(0,a.useEffect)(()=>{_()},[]);let _=async()=>{try{n(!0);let{data:e,error:t}=await x.rpc("get_detailer_availability");if(t)throw t;l(e||[])}catch(e){u(e instanceof Error?e.message:"Failed to load availability")}finally{n(!1)}},h=async t=>{try{o(!0),u(null);let a=e.find(e=>e.day_of_week===t);if(a){let{error:e}=await x.rpc("set_detailer_availability",{p_day_of_week:t,p_start_time:a.start_time,p_end_time:a.end_time,p_is_active:!a.is_active});if(e)throw e}else{let{error:e}=await x.rpc("set_detailer_availability",{p_day_of_week:t,p_start_time:"09:00:00",p_end_time:"17:00:00",p_is_active:!0});if(e)throw e}await _()}catch(e){u(e instanceof Error?e.message:"Failed to update availability")}finally{o(!1)}},p=async(t,a,i)=>{try{o(!0),u(null);let s=e.find(e=>e.day_of_week===t),r=i.includes(":")&&2===i.split(":").length?`${i}:00`:i,{error:l}=await x.rpc("set_detailer_availability",{p_day_of_week:t,p_start_time:"start_time"===a?r:s?.start_time||"09:00:00",p_end_time:"end_time"===a?r:s?.end_time||"17:00:00",p_is_active:s?.is_active??!0});if(l)throw l;await _()}catch(e){u(e instanceof Error?e.message:"Failed to update time")}finally{o(!1)}};return d?(0,t.jsx)("div",{className:"min-h-screen bg-[#050B12] text-white flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-[#C6CFD9]",children:"Loading availability..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-[#050B12] text-white",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Availability Management"}),(0,t.jsx)("p",{className:"text-[#C6CFD9]",children:"Set your weekly availability schedule"})]}),m&&(0,t.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm mb-6",children:m}),(0,t.jsxs)("div",{className:"bg-[#0A1A2F] border border-white/5 rounded-xl p-6",children:[(0,t.jsx)("div",{className:"space-y-4",children:r.map((a,i)=>{let s=e.find(e=>e.day_of_week===i),r=s?.is_active??!1;return(0,t.jsx)("div",{className:"flex items-center justify-between p-4 bg-[#050B12] border border-white/5 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:r,onChange:()=>h(i),disabled:c,className:"w-5 h-5 rounded border-white/20 bg-[#0A1A2F] text-[#32CE7A] focus:ring-[#32CE7A]"}),(0,t.jsx)("span",{className:"text-white font-medium w-24",children:a})]}),r&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"time",value:s?s.start_time.substring(0,5):"09:00",onChange:e=>p(i,"start_time",e.target.value),disabled:c,className:"px-3 py-2 bg-[#0A1A2F] border border-white/10 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-[#6FF0C4]"}),(0,t.jsx)("span",{className:"text-[#C6CFD9]",children:"to"}),(0,t.jsx)("input",{type:"time",value:s?s.end_time.substring(0,5):"17:00",onChange:e=>p(i,"end_time",e.target.value),disabled:c,className:"px-3 py-2 bg-[#0A1A2F] border border-white/10 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-[#6FF0C4]"})]})]})},i)})}),c&&(0,t.jsx)("div",{className:"mt-4 text-[#C6CFD9] text-sm",children:"Saving changes..."})]})]})})}e.s(["default",()=>l])}]);
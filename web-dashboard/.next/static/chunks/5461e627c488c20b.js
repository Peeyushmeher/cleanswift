(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7801,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(31738),i=e.r(88410),n=e.r(61631)},18451,66040,63932,34147,e=>{"use strict";var t=e.i(7801),r=(0,t.createServerReference)("70441f92eace9f5c95172795179a39e8de3e56cc9c",t.callServer,void 0,t.findSourceMapURL,"updateMemberRole");e.s(["updateMemberRole",()=>r],18451);var s=(0,t.createServerReference)("60cbe5e04c6b41e452e03d4194f480e00fc61fb53d",t.callServer,void 0,t.findSourceMapURL,"suspendMember");e.s(["suspendMember",()=>s],66040);var a=(0,t.createServerReference)("60130a1205b9140401be37ca750477dc5af6567516",t.callServer,void 0,t.findSourceMapURL,"activateMember");e.s(["activateMember",()=>a],63932);var l=(0,t.createServerReference)("60aa0c9c4e959f5cdd05e33b980a52df99e7636d8e",t.callServer,void 0,t.findSourceMapURL,"removeMember");e.s(["removeMember",()=>l],34147)},67521,e=>{"use strict";var t=e.i(84394),r=e.i(67589),s=e.i(76708),a=e.i(50067),l=e.i(13028),i=e.i(7801),n=(0,i.createServerReference)("70d670d5b7c33656d329e209464ed2fd2b18b59873",i.callServer,void 0,i.findSourceMapURL,"inviteMember");function d({isOpen:e,onClose:s,organizationId:a,onInvited:l}){let[i,d]=(0,r.useState)(""),[c,o]=(0,r.useState)("detailer"),[m,x]=(0,r.useState)(!1),[b,h]=(0,r.useState)(null),u=async e=>{e.preventDefault(),h(null),x(!0);try{await n(a,i,c),d(""),o("detailer"),l(),s()}catch(e){h(e.message||"Failed to invite member")}finally{x(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,t.jsxs)("div",{className:"relative z-10 w-full max-w-md mx-4 bg-[#0A1A2F] border border-white/5 rounded-xl shadow-xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Invite Member"}),(0,t.jsx)("button",{onClick:s,className:"text-[#C6CFD9] hover:text-white transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("form",{onSubmit:u,className:"p-6",children:[b&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/40 rounded-lg text-red-400 text-sm",children:b}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>d(e.target.value),required:!0,placeholder:"member@example.com",className:"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-[#C6CFD9]",children:"User must already have an account with this email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-white mb-2",children:"Role"}),(0,t.jsxs)("select",{id:"role",value:c,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40",children:[(0,t.jsx)("option",{value:"detailer",children:"Detailer"}),(0,t.jsx)("option",{value:"dispatcher",children:"Dispatcher"}),(0,t.jsx)("option",{value:"manager",children:"Manager"}),(0,t.jsx)("option",{value:"owner",children:"Owner"})]}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-[#C6CFD9]",children:["owner"===c&&"Owners have full access to all organization features","manager"===c&&"Managers can manage teams, members, and bookings","dispatcher"===c&&"Dispatchers can assign jobs and manage schedules","detailer"===c&&"Detailers can view and complete assigned jobs"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white hover:border-white/10 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:m||!i,className:"px-4 py-2 bg-[#32CE7A] hover:bg-[#2AB869] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Inviting...":"Send Invitation"})]})]})]})]}):null}e.i(18451);var c=e.i(66040),o=e.i(63932),m=e.i(34147);function x({initialMembers:e,organizationId:i,canManageMembers:n,canChangeRoles:x}){let[b,h]=(0,r.useState)(e),[u,p]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[j,g]=(0,r.useState)(null);(0,s.createClient)();let y=(0,a.useRouter)(),C=async e=>{if(confirm("Are you sure you want to suspend this member?")){g(e);try{await (0,c.suspendMember)(i,e),y.refresh()}catch(e){alert(e.message||"Failed to suspend member")}finally{g(null)}}},w=async e=>{g(e);try{await (0,o.activateMember)(i,e),y.refresh()}catch(e){alert(e.message||"Failed to activate member")}finally{g(null)}},N=async e=>{if(confirm("Are you sure you want to remove this member from the organization?")){g(e);try{await (0,m.removeMember)(i,e),y.refresh()}catch(e){alert(e.message||"Failed to remove member")}finally{g(null)}}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-[#0A1A2F] border border-white/5 rounded-xl p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Organization Members"}),n&&(0,t.jsx)("button",{className:"px-4 py-2 bg-[#32CE7A] hover:bg-[#2AB869] text-white font-semibold rounded-lg transition-colors",onClick:()=>v(!0),children:"+ Invite Member"})]}),0===b.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-[#C6CFD9] mb-4",children:"No members found"})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/5",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Name"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Email"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Role"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Status"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Joined"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-[#C6CFD9]",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:b.map(e=>(0,t.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("div",{className:"font-medium text-white",children:e.full_name})}),(0,t.jsx)("td",{className:"py-3 px-4 text-[#C6CFD9]",children:e.email}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium border ${(e=>{switch(e){case"owner":return"bg-purple-500/20 text-purple-400 border-purple-500/40";case"manager":return"bg-blue-500/20 text-blue-400 border-blue-500/40";case"dispatcher":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/40";case"detailer":return"bg-[#32CE7A]/20 text-[#32CE7A] border-[#32CE7A]/40";default:return"bg-gray-500/20 text-gray-400 border-gray-500/40"}})(e.role)}`,children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${e.is_active?"bg-[#32CE7A]/20 text-[#32CE7A]":"bg-red-500/20 text-red-400"}`,children:e.is_active?"Active":"Inactive"})}),(0,t.jsx)("td",{className:"py-3 px-4 text-[#C6CFD9] text-sm",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(l.default,{href:`/detailer/members/${e.profile_id}`,className:"text-[#32CE7A] hover:text-[#6FF0C4] text-sm font-medium",children:"View â†’"}),n&&(0,t.jsxs)(t.Fragment,{children:[!e.is_active&&(0,t.jsx)("button",{onClick:()=>w(e.profile_id),disabled:j===e.profile_id,className:"text-xs px-2 py-1 bg-[#32CE7A]/20 text-[#32CE7A] rounded hover:bg-[#32CE7A]/30 disabled:opacity-50",children:"Activate"}),e.is_active&&"owner"!==e.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>C(e.profile_id),disabled:j===e.profile_id,className:"text-xs px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded hover:bg-yellow-500/30 disabled:opacity-50",children:"Suspend"}),(0,t.jsx)("button",{onClick:()=>N(e.profile_id),disabled:j===e.profile_id,className:"text-xs px-2 py-1 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 disabled:opacity-50",children:"Remove"})]})]})]})})]},e.id))})]})})]}),(0,t.jsxs)("div",{className:"bg-[#0A1A2F] border border-white/5 rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"About Roles"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-[#C6CFD9]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-purple-400",children:"Owner:"})," Full access, can manage everything"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-blue-400",children:"Manager:"})," Can manage teams, members, and bookings"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-yellow-400",children:"Dispatcher:"})," Can assign jobs and manage schedule"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-[#32CE7A]",children:"Detailer:"})," Can view and complete assigned jobs"]})]}),(0,t.jsxs)("p",{className:"text-[#C6CFD9] text-sm mt-4",children:[(0,t.jsx)("strong",{children:"Note:"})," Full member management features (invite, change roles, remove) will be available in Phase 3."]})]}),(0,t.jsx)(d,{isOpen:f,onClose:()=>v(!1),organizationId:i,onInvited:()=>{y.refresh()}})]})}e.s(["default",()=>x],67521)}]);
{"version":3,"sources":["../../../../../../cleanswift/web-dashboard/app/detailer/settings/SettingsPageClient.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { useRouter } from 'next/navigation';\n\ninterface SettingsPageClientProps {\n  profile: any;\n  serviceAreas: any[];\n  notificationSettings: any;\n}\n\nexport default function SettingsPageClient({\n  profile,\n  serviceAreas,\n  notificationSettings,\n}: SettingsPageClientProps) {\n  const router = useRouter();\n  const supabase = createClient();\n  const [isSaving, setIsSaving] = useState(false);\n\n  const [formData, setFormData] = useState({\n    full_name: profile.full_name || '',\n    phone: profile.phone || '',\n    city: serviceAreas[0]?.city || '',\n    province: serviceAreas[0]?.province || '',\n    postal_code: serviceAreas[0]?.postal_code || '',\n    push_enabled: notificationSettings?.push_enabled ?? true,\n    email_enabled: notificationSettings?.email_enabled ?? false,\n  });\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    try {\n      // Update profile\n      await supabase\n        .from('profiles')\n        .update({\n          full_name: formData.full_name,\n          phone: formData.phone,\n        })\n        .eq('id', profile.id);\n\n      // Update service area (for solo mode, only one)\n      if (serviceAreas.length > 0) {\n        await supabase\n          .from('service_areas')\n          .update({\n            city: formData.city,\n            province: formData.province,\n            postal_code: formData.postal_code,\n          })\n          .eq('id', serviceAreas[0].id);\n      }\n\n      // Update notification settings\n      if (notificationSettings) {\n        await supabase\n          .from('notification_settings')\n          .update({\n            push_enabled: formData.push_enabled,\n            email_enabled: formData.email_enabled,\n          })\n          .eq('user_id', profile.id);\n      }\n\n      router.refresh();\n      alert('Settings saved successfully!');\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      alert('Failed to save settings');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Profile Section */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Profile</h2>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              Full Name\n            </label>\n            <input\n              type=\"text\"\n              value={formData.full_name}\n              onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              value={profile.email || ''}\n              disabled\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12]/50 border border-white/5 rounded-lg text-[#C6CFD9] cursor-not-allowed\"\n            />\n            <p className=\"text-xs text-[#C6CFD9] mt-1\">Email cannot be changed</p>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              Phone\n            </label>\n            <input\n              type=\"tel\"\n              value={formData.phone}\n              onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Service Area Section */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Service Area</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              City\n            </label>\n            <input\n              type=\"text\"\n              value={formData.city}\n              onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              Province\n            </label>\n            <input\n              type=\"text\"\n              value={formData.province}\n              onChange={(e) => setFormData({ ...formData, province: e.target.value })}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-[#C6CFD9] mb-2\">\n              Postal Code\n            </label>\n            <input\n              type=\"text\"\n              value={formData.postal_code}\n              onChange={(e) => setFormData({ ...formData, postal_code: e.target.value })}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Notification Preferences */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Notification Preferences</h2>\n        <div className=\"space-y-4\">\n          <label className=\"flex items-center justify-between cursor-pointer\">\n            <span className=\"text-[#C6CFD9]\">Push Notifications</span>\n            <input\n              type=\"checkbox\"\n              checked={formData.push_enabled}\n              onChange={(e) => setFormData({ ...formData, push_enabled: e.target.checked })}\n              suppressHydrationWarning\n              className=\"w-12 h-6 rounded-full bg-[#050B12] border border-white/5 appearance-none relative cursor-pointer checked:bg-[#32CE7A] transition-colors\"\n            />\n          </label>\n          <label className=\"flex items-center justify-between cursor-pointer\">\n            <span className=\"text-[#C6CFD9]\">Email Notifications</span>\n            <input\n              type=\"checkbox\"\n              checked={formData.email_enabled}\n              onChange={(e) => setFormData({ ...formData, email_enabled: e.target.checked })}\n              suppressHydrationWarning\n              className=\"w-12 h-6 rounded-full bg-[#050B12] border border-white/5 appearance-none relative cursor-pointer checked:bg-[#32CE7A] transition-colors\"\n            />\n          </label>\n        </div>\n      </div>\n\n      {/* Stripe Connect Status */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Payment Account</h2>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-[#C6CFD9]\">Stripe Connect Account</p>\n            <p className=\"text-sm text-[#C6CFD9] mt-1\">\n              Status: Not Connected (Placeholder)\n            </p>\n          </div>\n          <button\n            disabled\n            className=\"px-4 py-2 bg-[#32CE7A]/20 text-[#32CE7A] rounded-lg cursor-not-allowed\"\n          >\n            Connect Account\n          </button>\n        </div>\n      </div>\n\n      {/* Save Button */}\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleSave}\n          disabled={isSaving}\n          className=\"px-6 py-3 bg-[#32CE7A] hover:bg-[#2AB869] text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isSaving ? 'Saving...' : 'Save Settings'}\n        </button>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}
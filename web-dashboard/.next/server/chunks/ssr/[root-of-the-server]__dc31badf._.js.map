{"version":3,"sources":["../../../../../../cleanswift/web-dashboard/app/admin/dashboard/page.tsx"],"sourcesContent":["import { requireAdmin } from '@/lib/auth';\nimport { createClient } from '@/lib/supabase/server';\n\nexport default async function AdminDashboardPage() {\n  const profile = await requireAdmin();\n  const supabase = await createClient();\n\n  // Get dashboard stats\n  const { data: stats } = await supabase.rpc('get_dashboard_stats');\n\n  // Get recent bookings\n  const { data: recentBookings } = await supabase\n    .from('bookings')\n    .select(\n      `\n      id,\n      receipt_id,\n      status,\n      payment_status,\n      scheduled_start,\n      total_amount,\n      created_at,\n      user:user_id (full_name, email),\n      detailer:detailer_id (full_name),\n      service:service_id (name)\n    `\n    )\n    .order('created_at', { ascending: false })\n    .limit(10);\n\n  return (\n    <div className=\"min-h-screen bg-[#050B12] text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Admin Dashboard</h1>\n          <p className=\"text-[#C6CFD9]\">Welcome back, {profile.full_name}</p>\n        </div>\n\n        {/* Stats Grid */}\n        {stats && (\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n              <div className=\"text-[#C6CFD9] text-sm mb-2\">Total Bookings</div>\n              <div className=\"text-3xl font-bold text-white\">{stats.total_bookings}</div>\n            </div>\n            <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n              <div className=\"text-[#C6CFD9] text-sm mb-2\">Active Bookings</div>\n              <div className=\"text-3xl font-bold text-white\">{stats.active_bookings}</div>\n            </div>\n            <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n              <div className=\"text-[#C6CFD9] text-sm mb-2\">Total Revenue</div>\n              <div className=\"text-3xl font-bold text-[#32CE7A]\">${stats.total_revenue.toFixed(2)}</div>\n            </div>\n            <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n              <div className=\"text-[#C6CFD9] text-sm mb-2\">Total Users</div>\n              <div className=\"text-3xl font-bold text-white\">{stats.total_users}</div>\n            </div>\n          </div>\n        )}\n\n        {/* Recent Bookings */}\n        <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n          <h2 className=\"text-xl font-semibold text-white mb-4\">Recent Bookings</h2>\n          {!recentBookings || recentBookings.length === 0 ? (\n            <p className=\"text-[#C6CFD9]\">No recent bookings</p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-white/10\">\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">ID</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Customer</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Service</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Status</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Amount</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Date</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {recentBookings.map((booking: any) => (\n                    <tr key={booking.id} className=\"border-b border-white/5 hover:bg-white/5\">\n                      <td className=\"py-3 px-4 text-white text-sm\">{booking.receipt_id}</td>\n                      <td className=\"py-3 px-4 text-white text-sm\">{booking.user?.full_name || 'N/A'}</td>\n                      <td className=\"py-3 px-4 text-white text-sm\">{booking.service?.name || 'N/A'}</td>\n                      <td className=\"py-3 px-4 text-sm\">\n                        <span className=\"capitalize text-[#C6CFD9]\">{booking.status}</span>\n                      </td>\n                      <td className=\"py-3 px-4 text-white text-sm\">${booking.total_amount || 0}</td>\n                      <td className=\"py-3 px-4 text-[#C6CFD9] text-sm\">\n                        {new Date(booking.created_at).toLocaleDateString()}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}
module.exports=[59838,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(44322)},74857,a=>{"use strict";function b(a){return!!a&&("owner"===a||"manager"===a||"dispatcher"===a)}function c(a){return!!a&&("owner"===a||"manager"===a)}function d(a){return!!a&&("owner"===a||"manager"===a)}function e(a){return!!a&&("owner"===a||"manager"===a)}function f(a){return!!a&&"owner"===a}function g(a){return!!a&&"owner"===a}function h(a){return!!a&&("owner"===a||"manager"===a)}function i(a){return!!a&&("owner"===a||"manager"===a||"dispatcher"===a)}a.s(["canAssignJobs",()=>b,"canChangeMemberRoles",()=>g,"canManageMembers",()=>d,"canManageOrgSettings",()=>f,"canManageTeams",()=>c,"canRemoveMembers",()=>h,"canViewAllOrgBookings",()=>i,"canViewOrgEarnings",()=>e])},36288,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},93083,a=>{"use strict";var b=a.i(59838),c=a.i(75557),d=a.i(54380),e=a.i(14650),f=a.i(74857);async function g(a,b,g){let h=await (0,c.createClient)();await (0,d.requireDetailer)();let i=await (0,e.getDetailerOrganization)();if(!i||i.id!==a)throw Error("Organization not found");let j=await (0,e.getOrganizationRole)(a);if(!(0,f.canManageMembers)(j))throw Error("You do not have permission to invite members");if("owner"===g&&"owner"!==j)throw Error("Only owners can invite other owners");let{data:k,error:l}=await h.rpc("invite_member",{p_organization_id:a,p_email:b,p_role:g});if(l)throw Error(l.message||"Failed to invite member");return k}async function h(a,b,g){let h=await (0,c.createClient)();await (0,d.requireDetailer)();let i=await (0,e.getOrganizationRole)(a);if(!(0,f.canChangeMemberRoles)(i))throw Error("You do not have permission to change member roles");let{error:j}=await h.rpc("update_member_role",{p_organization_id:a,p_profile_id:b,p_new_role:g});if(j)throw Error(j.message||"Failed to update member role");return{success:!0}}async function i(a,b){let g=await (0,c.createClient)();await (0,d.requireDetailer)();let h=await (0,e.getOrganizationRole)(a);if(!(0,f.canRemoveMembers)(h))throw Error("You do not have permission to suspend members");let{data:{user:i}}=await g.auth.getUser();if(i?.id===b)throw Error("You cannot suspend yourself");let{error:j}=await g.from("organization_members").update({is_active:!1}).eq("organization_id",a).eq("profile_id",b);if(j)throw Error("Failed to suspend member");return{success:!0}}async function j(a,b){let g=await (0,c.createClient)();await (0,d.requireDetailer)();let h=await (0,e.getOrganizationRole)(a);if(!(0,f.canRemoveMembers)(h))throw Error("You do not have permission to activate members");let{error:i}=await g.from("organization_members").update({is_active:!0}).eq("organization_id",a).eq("profile_id",b);if(i)throw Error("Failed to activate member");return{success:!0}}async function k(a,b){let g=await (0,c.createClient)();await (0,d.requireDetailer)();let h=await (0,e.getOrganizationRole)(a);if(!(0,f.canRemoveMembers)(h))throw Error("You do not have permission to remove members");let{data:{user:i}}=await g.auth.getUser();if(i?.id===b)throw Error("You cannot remove yourself");let{error:j}=await g.rpc("remove_member",{p_organization_id:a,p_profile_id:b});if(j)throw Error(j.message||"Failed to remove member");return{success:!0}}(0,a.i(36288).ensureServerEntryExports)([g,h,i,j,k]),(0,b.registerServerReference)(g,"70d670d5b7c33656d329e209464ed2fd2b18b59873",null),(0,b.registerServerReference)(h,"70441f92eace9f5c95172795179a39e8de3e56cc9c",null),(0,b.registerServerReference)(i,"60cbe5e04c6b41e452e03d4194f480e00fc61fb53d",null),(0,b.registerServerReference)(j,"60130a1205b9140401be37ca750477dc5af6567516",null),(0,b.registerServerReference)(k,"60aa0c9c4e959f5cdd05e33b980a52df99e7636d8e",null),a.s(["activateMember",()=>j,"inviteMember",()=>g,"removeMember",()=>k,"suspendMember",()=>i,"updateMemberRole",()=>h])},49832,a=>{"use strict";var b=a.i(93083);a.s([],65065),a.i(65065),a.s(["60130a1205b9140401be37ca750477dc5af6567516",()=>b.activateMember,"60aa0c9c4e959f5cdd05e33b980a52df99e7636d8e",()=>b.removeMember,"60cbe5e04c6b41e452e03d4194f480e00fc61fb53d",()=>b.suspendMember,"70441f92eace9f5c95172795179a39e8de3e56cc9c",()=>b.updateMemberRole],49832)}];

//# sourceMappingURL=cleanswift_web-dashboard_e88cd4a5._.js.map
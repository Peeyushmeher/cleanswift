{"version":3,"sources":["../../../../../../cleanswift/web-dashboard/components/detailer/EarningsChart.tsx","../../../../../../cleanswift/web-dashboard/app/detailer/dashboard/CalendarView.tsx"],"sourcesContent":["'use client';\n\ninterface EarningsData {\n  date: string;\n  amount: number;\n}\n\ninterface EarningsChartProps {\n  data: EarningsData[];\n  period: 'day' | 'week' | 'month';\n}\n\nexport default function EarningsChart({ data, period }: EarningsChartProps) {\n  if (data.length === 0) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-[#C6CFD9]\">\n        No earnings data available\n      </div>\n    );\n  }\n\n  const maxAmount = Math.max(...data.map(d => d.amount), 0);\n\n  return (\n    <div className=\"h-64 relative\">\n      <div className=\"absolute inset-0 flex items-end justify-between gap-1\">\n        {data.map((item, index) => {\n          const height = maxAmount > 0 ? (item.amount / maxAmount) * 100 : 0;\n          return (\n            <div\n              key={index}\n              className=\"flex-1 flex flex-col items-center gap-1\"\n            >\n              <div\n                className=\"w-full bg-[#32CE7A] rounded-t transition-all hover:bg-[#6FF0C4] relative group\"\n                style={{ height: `${height}%` }}\n              >\n                <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-[#0A1A2F] border border-white/5 rounded text-xs text-white opacity-0 group-hover:opacity-100 whitespace-nowrap\">\n                  ${item.amount.toFixed(2)}\n                </div>\n              </div>\n              <div className=\"text-xs text-[#C6CFD9] transform -rotate-45 origin-left whitespace-nowrap\">\n                {new Date(item.date).toLocaleDateString('en-US', {\n                  month: 'short',\n                  day: 'numeric',\n                })}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      {/* Y-axis labels */}\n      <div className=\"absolute left-0 top-0 bottom-8 flex flex-col justify-between text-xs text-[#C6CFD9]\">\n        <span>${maxAmount.toFixed(0)}</span>\n        <span>${Math.floor(maxAmount / 2).toFixed(0)}</span>\n        <span>$0</span>\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\nimport { useState, useMemo } from 'react';\nimport Link from 'next/link';\n\ninterface Booking {\n  id: string;\n  receipt_id: string;\n  status: string;\n  scheduled_date: string;\n  scheduled_time_start: string;\n  scheduled_time_end?: string | null;\n  scheduled_start?: string;\n  service?: {\n    name: string;\n    price: number;\n  };\n  car?: {\n    make: string;\n    model: string;\n    year: string;\n  };\n  user?: {\n    full_name: string;\n  };\n}\n\ninterface CalendarViewProps {\n  bookings: Booking[];\n}\n\nconst DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nexport default function CalendarView({ bookings }: CalendarViewProps) {\n  const [currentDate, setCurrentDate] = useState(new Date());\n\n  const currentMonth = currentDate.getMonth();\n  const currentYear = currentDate.getFullYear();\n\n  // Get first day of month and number of days\n  const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();\n  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();\n\n  // Navigate months\n  const goToPreviousMonth = () => {\n    setCurrentDate(new Date(currentYear, currentMonth - 1, 1));\n  };\n\n  const goToNextMonth = () => {\n    setCurrentDate(new Date(currentYear, currentMonth + 1, 1));\n  };\n\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  // Group bookings by date\n  const bookingsByDate = useMemo(() => {\n    const grouped: Record<string, Booking[]> = {};\n    bookings.forEach((booking) => {\n      const dateKey = booking.scheduled_date || \n        (booking.scheduled_start ? new Date(booking.scheduled_start).toISOString().split('T')[0] : '');\n      if (dateKey) {\n        if (!grouped[dateKey]) {\n          grouped[dateKey] = [];\n        }\n        grouped[dateKey].push(booking);\n      }\n    });\n    return grouped;\n  }, [bookings]);\n\n  // Get bookings for a specific date\n  const getBookingsForDate = (day: number): Booking[] => {\n    const date = new Date(currentYear, currentMonth, day);\n    const dateKey = date.toISOString().split('T')[0];\n    return bookingsByDate[dateKey] || [];\n  };\n\n  // Get status color\n  const getStatusColor = (status: string): string => {\n    switch (status) {\n      case 'accepted':\n        return 'bg-[#1DA4F3]/20 border-[#1DA4F3]/40 text-[#1DA4F3]';\n      case 'in_progress':\n        return 'bg-[#6FF0C4]/20 border-[#6FF0C4]/40 text-[#6FF0C4]';\n      case 'completed':\n        return 'bg-[#32CE7A]/20 border-[#32CE7A]/40 text-[#32CE7A]';\n      default:\n        return 'bg-[#C6CFD9]/20 border-[#C6CFD9]/40 text-[#C6CFD9]';\n    }\n  };\n\n  // Generate calendar days\n  const calendarDays = useMemo(() => {\n    const days: Array<{ day: number; isCurrentMonth: boolean; isToday: boolean }> = [];\n\n    // Add empty cells for days before month starts\n    for (let i = 0; i < firstDayOfMonth; i++) {\n      days.push({ day: 0, isCurrentMonth: false, isToday: false });\n    }\n\n    // Add days of the month\n    const today = new Date();\n    for (let day = 1; day <= daysInMonth; day++) {\n      const isToday =\n        day === today.getDate() &&\n        currentMonth === today.getMonth() &&\n        currentYear === today.getFullYear();\n      days.push({ day, isCurrentMonth: true, isToday });\n    }\n\n    // Fill remaining cells to complete 6 weeks (42 cells total)\n    const totalCells = 42;\n    const remainingCells = totalCells - days.length;\n    for (let i = 0; i < remainingCells; i++) {\n      days.push({ day: 0, isCurrentMonth: false, isToday: false });\n    }\n\n    return days;\n  }, [firstDayOfMonth, daysInMonth, currentMonth, currentYear]);\n\n  return (\n    <div className=\"w-full\">\n      {/* Calendar Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={goToPreviousMonth}\n            className=\"p-2 hover:bg-white/5 rounded-lg transition-colors\"\n            aria-label=\"Previous month\"\n          >\n            <svg\n              className=\"w-5 h-5 text-[#C6CFD9]\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M15 19l-7-7 7-7\"\n              />\n            </svg>\n          </button>\n          <h3 className=\"text-xl font-semibold text-white\">\n            {MONTH_NAMES[currentMonth]} {currentYear}\n          </h3>\n          <button\n            onClick={goToNextMonth}\n            className=\"p-2 hover:bg-white/5 rounded-lg transition-colors\"\n            aria-label=\"Next month\"\n          >\n            <svg\n              className=\"w-5 h-5 text-[#C6CFD9]\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 5l7 7-7 7\"\n              />\n            </svg>\n          </button>\n        </div>\n        <button\n          onClick={goToToday}\n          className=\"px-4 py-2 bg-[#1DA4F3]/20 hover:bg-[#1DA4F3]/30 border border-[#1DA4F3]/40 text-[#1DA4F3] rounded-lg transition-colors text-sm font-medium\"\n        >\n          Today\n        </button>\n      </div>\n\n      {/* Calendar Grid */}\n      <div className=\"grid grid-cols-7 gap-2\">\n        {/* Day headers */}\n        {DAY_NAMES.map((day) => (\n          <div\n            key={day}\n            className=\"text-center text-sm font-semibold text-[#C6CFD9] py-2\"\n          >\n            {day}\n          </div>\n        ))}\n\n        {/* Calendar days */}\n        {calendarDays.map(({ day, isCurrentMonth, isToday }, index) => {\n          const bookingsForDay = day > 0 ? getBookingsForDate(day) : [];\n          const hasBookings = bookingsForDay.length > 0;\n\n          return (\n            <div\n              key={index}\n              className={`min-h-[100px] p-2 border border-white/5 rounded-lg ${\n                isCurrentMonth ? 'bg-[#050B12]' : 'bg-[#0A1A2F]/50 opacity-50'\n              } ${isToday ? 'ring-2 ring-[#6FF0C4]/50' : ''}`}\n            >\n              {day > 0 && (\n                <>\n                  <div\n                    className={`text-sm font-medium mb-1 ${\n                      isToday\n                        ? 'text-[#6FF0C4]'\n                        : isCurrentMonth\n                        ? 'text-white'\n                        : 'text-[#C6CFD9]'\n                    }`}\n                  >\n                    {day}\n                  </div>\n                  <div className=\"space-y-1\">\n                    {bookingsForDay.slice(0, 2).map((booking) => (\n                      <Link\n                        key={booking.id}\n                        href={`/detailer/bookings/${booking.id}`}\n                        className={`block text-xs p-1.5 rounded border ${getStatusColor(\n                          booking.status\n                        )} hover:opacity-80 transition-opacity truncate`}\n                        title={`${booking.service?.name || 'Service'} - ${booking.user?.full_name || 'Customer'} at ${booking.scheduled_time_start?.substring(0, 5) || ''}`}\n                      >\n                        <div className=\"font-medium truncate\">\n                          {booking.scheduled_time_start?.substring(0, 5) || ''}\n                        </div>\n                        <div className=\"truncate\">\n                          {booking.service?.name || 'Service'}\n                        </div>\n                      </Link>\n                    ))}\n                    {bookingsForDay.length > 2 && (\n                      <div className=\"text-xs text-[#C6CFD9] px-1.5 py-1\">\n                        +{bookingsForDay.length - 2} more\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-6 flex items-center gap-6 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded bg-[#1DA4F3]/20 border border-[#1DA4F3]/40\"></div>\n          <span className=\"text-[#C6CFD9]\">Accepted</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded bg-[#6FF0C4]/20 border border-[#6FF0C4]/40\"></div>\n          <span className=\"text-[#C6CFD9]\">In Progress</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded bg-[#32CE7A]/20 border border-[#32CE7A]/40\"></div>\n          <span className=\"text-[#C6CFD9]\">Completed</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}
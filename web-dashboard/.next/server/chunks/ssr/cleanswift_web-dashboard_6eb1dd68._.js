module.exports=[59838,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(44322)},74857,a=>{"use strict";function b(a){return!!a&&("owner"===a||"manager"===a||"dispatcher"===a)}function c(a){return!!a&&("owner"===a||"manager"===a)}function d(a){return!!a&&("owner"===a||"manager"===a)}function e(a){return!!a&&("owner"===a||"manager"===a)}function f(a){return!!a&&"owner"===a}function g(a){return!!a&&"owner"===a}function h(a){return!!a&&("owner"===a||"manager"===a)}function i(a){return!!a&&("owner"===a||"manager"===a||"dispatcher"===a)}a.s(["canAssignJobs",()=>b,"canChangeMemberRoles",()=>g,"canManageMembers",()=>d,"canManageOrgSettings",()=>f,"canManageTeams",()=>c,"canRemoveMembers",()=>h,"canViewAllOrgBookings",()=>i,"canViewOrgEarnings",()=>e])},36288,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},91913,a=>{"use strict";var b=a.i(59838),c=a.i(75557),d=a.i(54380),e=a.i(14650),f=a.i(74857);async function g(a,b,g,h,i){let j=await (0,c.createClient)();await (0,d.requireDetailer)();let k=await (0,e.getDetailerOrganization)();if(!k||k.id!==a)throw Error("Organization not found");let l=await (0,e.getOrganizationRole)(a);if(!(0,f.canManageTeams)(l))throw Error("You do not have permission to create teams");let{data:m,error:n}=await j.from("teams").insert({organization_id:a,name:b,description:g,service_area:h,is_active:!0}).select().single();if(n||!m)throw Error("Failed to create team");if(i.length>0){let{error:a}=await j.from("team_members").insert(i.map(a=>({team_id:m.id,detailer_id:a})));a&&console.error("Failed to add team members:",a)}return m}async function h(a,b,g,h,i){let j=await (0,c.createClient)();await (0,d.requireDetailer)();let{data:k}=await j.from("teams").select("organization_id").eq("id",a).single();if(!k)throw Error("Team not found");let l=await (0,e.getOrganizationRole)(k.organization_id);if(!(0,f.canManageTeams)(l))throw Error("You do not have permission to update teams");let{error:m}=await j.from("teams").update({name:b,description:g,service_area:h}).eq("id",a);if(m)throw Error("Failed to update team");if(await j.from("team_members").delete().eq("team_id",a),i.length>0){let{error:b}=await j.from("team_members").insert(i.map(b=>({team_id:a,detailer_id:b})));b&&console.error("Failed to update team members:",b)}return{success:!0}}async function i(a){let b=await (0,c.createClient)();await (0,d.requireDetailer)();let{data:g}=await b.from("teams").select("organization_id").eq("id",a).single();if(!g)throw Error("Team not found");let h=await (0,e.getOrganizationRole)(g.organization_id);if(!(0,f.canManageTeams)(h))throw Error("You do not have permission to delete teams");let{error:i}=await b.from("teams").update({is_active:!1}).eq("id",a);if(i)throw Error("Failed to delete team");return{success:!0}}(0,a.i(36288).ensureServerEntryExports)([g,h,i]),(0,b.registerServerReference)(g,"7c9e886cc9b6842afc1ea140e9177bb5ff09d4a3a4",null),(0,b.registerServerReference)(h,"7ce42137efe2c23d4b85f8f016fe67dbee01b8d728",null),(0,b.registerServerReference)(i,"40c3272981a6808b5628b331a605ca0fd5ddb2b73e",null),a.s(["createTeam",()=>g,"deleteTeam",()=>i,"updateTeam",()=>h])},21763,a=>{"use strict";var b=a.i(91913);a.s([],41081),a.i(41081),a.s(["40c3272981a6808b5628b331a605ca0fd5ddb2b73e",()=>b.deleteTeam,"7c9e886cc9b6842afc1ea140e9177bb5ff09d4a3a4",()=>b.createTeam,"7ce42137efe2c23d4b85f8f016fe67dbee01b8d728",()=>b.updateTeam],21763)}];

//# sourceMappingURL=cleanswift_web-dashboard_6eb1dd68._.js.map
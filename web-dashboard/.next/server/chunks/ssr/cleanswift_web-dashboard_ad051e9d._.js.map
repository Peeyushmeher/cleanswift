{"version":3,"sources":["../../../../../../cleanswift/web-dashboard/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../../../cleanswift/web-dashboard/app/admin/detailers/page.tsx","../../../../../../cleanswift/web-dashboard/.next-internal/server/app/admin/detailers/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","import { requireAdmin } from '@/lib/auth';\nimport { createClient } from '@/lib/supabase/server';\nimport { redirect } from 'next/navigation';\n\nexport default async function AdminDetailersPage() {\n  const profile = await requireAdmin();\n  const supabase = await createClient();\n\n  // Get all detailers\n  const { data: detailers } = await supabase.rpc('get_all_detailers');\n\n  async function toggleDetailerStatus(formData: FormData) {\n    'use server';\n    const detailerId = formData.get('detailer_id') as string;\n    if (detailerId) {\n      const supabase = await createClient();\n      // Get current detailer status\n      const { data: detailer } = await supabase\n        .from('detailers')\n        .select('is_active')\n        .eq('id', detailerId)\n        .single();\n\n      if (detailer) {\n        await supabase\n          .from('detailers')\n          .update({ is_active: !detailer.is_active })\n          .eq('id', detailerId);\n      }\n      redirect('/admin/detailers');\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#050B12] text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Detailers Management</h1>\n          <p className=\"text-[#C6CFD9]\">Manage detailer accounts and status</p>\n        </div>\n\n        {/* Detailers Table */}\n        {!detailers || detailers.length === 0 ? (\n          <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-8 text-center\">\n            <p className=\"text-[#C6CFD9]\">No detailers found</p>\n          </div>\n        ) : (\n          <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-[#050B12] border-b border-white/10\">\n                  <tr>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Name</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Email</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Phone</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Rating</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Experience</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Bookings</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Status</th>\n                    <th className=\"text-left py-3 px-4 text-[#C6CFD9] text-sm font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {detailers.map((detailer: any) => (\n                    <tr key={detailer.id} className=\"border-b border-white/5 hover:bg-white/5\">\n                      <td className=\"py-3 px-4 text-white text-sm\">{detailer.full_name}</td>\n                      <td className=\"py-3 px-4 text-white text-sm\">\n                        {detailer.profile?.email || 'N/A'}\n                      </td>\n                      <td className=\"py-3 px-4 text-white text-sm\">\n                        {detailer.profile?.phone || 'N/A'}\n                      </td>\n                      <td className=\"py-3 px-4 text-white text-sm\">\n                        {detailer.rating ? detailer.rating.toFixed(1) : 'N/A'} (\n                        {detailer.review_count || 0} reviews)\n                      </td>\n                      <td className=\"py-3 px-4 text-white text-sm\">\n                        {detailer.years_experience || 0} years\n                      </td>\n                      <td className=\"py-3 px-4 text-white text-sm\">\n                        {detailer.booking_count || 0} total, {detailer.completed_count || 0} completed\n                      </td>\n                      <td className=\"py-3 px-4 text-sm\">\n                        {detailer.is_active ? (\n                          <span className=\"text-[#32CE7A]\">Active</span>\n                        ) : (\n                          <span className=\"text-red-400\">Inactive</span>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <form action={toggleDetailerStatus}>\n                          <input type=\"hidden\" name=\"detailer_id\" value={detailer.id} />\n                          <button\n                            type=\"submit\"\n                            className={`text-sm font-semibold py-1 px-3 rounded transition-colors ${\n                              detailer.is_active\n                                ? 'bg-red-500/20 text-red-400 hover:bg-red-500/30'\n                                : 'bg-[#32CE7A]/20 text-[#32CE7A] hover:bg-[#32CE7A]/30'\n                            }`}\n                          >\n                            {detailer.is_active ? 'Deactivate' : 'Activate'}\n                          </button>\n                        </form>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n","export {$$RSC_SERVER_ACTION_0 as '400f61838433673e3a9aa596368bd71211f727c572'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference"],"mappings":"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","ignoreList":[0]}
{"version":3,"sources":["../../../../../../cleanswift/web-dashboard/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../../../cleanswift/web-dashboard/app/detailer/settings/organization/OrganizationSettingsClient.tsx","../../../../../../cleanswift/web-dashboard/app/detailer/settings/organization/data%3A89e4cd%20%3Ctext/javascript%3E","../../../../../../cleanswift/web-dashboard/app/detailer/settings/organization/data%3Af861ab%20%3Ctext/javascript%3E","../../../../../../cleanswift/web-dashboard/app/detailer/settings/organization/data%3Acab542%20%3Ctext/javascript%3E"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { updateOrganizationProfile, addServiceZone, deleteServiceZone, updateBusinessHours } from './actions';\nimport { createClient } from '@/lib/supabase/client';\n\ninterface OrganizationSettingsClientProps {\n  organization: any;\n  initialServiceZones: any[];\n}\n\nexport default function OrganizationSettingsClient({\n  organization,\n  initialServiceZones,\n}: OrganizationSettingsClientProps) {\n  const [name, setName] = useState(organization.name || '');\n  const [description, setDescription] = useState((organization as any).description || '');\n  const [serviceZones, setServiceZones] = useState(initialServiceZones);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [newZone, setNewZone] = useState({ city: '', province: '', postalCodes: '' });\n  const router = useRouter();\n  const supabase = createClient();\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      await updateOrganizationProfile(organization.id, name, description);\n      router.refresh();\n    } catch (err: any) {\n      setError(err.message || 'Failed to update profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddZone = async () => {\n    if (!newZone.city || !newZone.province) {\n      setError('City and province are required');\n      return;\n    }\n\n    setError(null);\n    setLoading(true);\n\n    try {\n      const zoneData = {\n        city: newZone.city,\n        province: newZone.province,\n        postalCodes: newZone.postalCodes.split(',').map((p) => p.trim()).filter(Boolean),\n      };\n      await addServiceZone(organization.id, zoneData);\n      setNewZone({ city: '', province: '', postalCodes: '' });\n      router.refresh();\n    } catch (err: any) {\n      setError(err.message || 'Failed to add service zone');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteZone = async (zoneIndex: number) => {\n    if (!confirm('Are you sure you want to remove this service zone?')) return;\n\n    setError(null);\n    setLoading(true);\n\n    try {\n      await deleteServiceZone(organization.id, zoneIndex);\n      router.refresh();\n    } catch (err: any) {\n      setError(err.message || 'Failed to delete service zone');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {error && (\n        <div className=\"p-4 bg-red-500/20 border border-red-500/40 rounded-lg text-red-400\">\n          {error}\n        </div>\n      )}\n\n      {/* Organization Profile */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Organization Profile</h2>\n        <form onSubmit={handleUpdateProfile} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"name\" className=\"block text-sm font-medium text-white mb-2\">\n              Organization Name *\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-white mb-2\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              suppressHydrationWarning\n              className=\"w-full px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-white mb-2\">\n              Business Logo\n            </label>\n            <div className=\"p-4 bg-[#050B12] border border-white/5 rounded-lg text-[#C6CFD9] text-sm\">\n              Logo upload feature coming soon\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"px-4 py-2 bg-[#32CE7A] hover:bg-[#2AB869] text-white font-semibold rounded-lg transition-colors disabled:opacity-50\"\n          >\n            {loading ? 'Saving...' : 'Save Changes'}\n          </button>\n        </form>\n      </div>\n\n      {/* Service Zones */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Service Zones</h2>\n        <div className=\"space-y-4\">\n          {serviceZones.map((zone, idx) => (\n            <div\n              key={idx}\n              className=\"flex items-center justify-between p-4 bg-[#050B12] border border-white/5 rounded-lg\"\n            >\n              <div>\n                <div className=\"font-medium text-white\">\n                  {zone.city}, {zone.province}\n                </div>\n                {zone.postalCodes && zone.postalCodes.length > 0 && (\n                  <div className=\"text-sm text-[#C6CFD9]\">\n                    Postal Codes: {zone.postalCodes.join(', ')}\n                  </div>\n                )}\n              </div>\n              <button\n                onClick={() => handleDeleteZone(idx)}\n                className=\"text-red-400 hover:text-red-300\"\n              >\n                Remove\n              </button>\n            </div>\n          ))}\n\n          <div className=\"p-4 bg-[#050B12] border border-white/5 rounded-lg space-y-3\">\n            <h3 className=\"font-medium text-white\">Add Service Zone</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n              <input\n                type=\"text\"\n                placeholder=\"City\"\n                value={newZone.city}\n                onChange={(e) => setNewZone({ ...newZone, city: e.target.value })}\n                suppressHydrationWarning\n                className=\"px-4 py-2 bg-[#0A1A2F] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40\"\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Province\"\n                value={newZone.province}\n                onChange={(e) => setNewZone({ ...newZone, province: e.target.value })}\n                suppressHydrationWarning\n                className=\"px-4 py-2 bg-[#0A1A2F] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40\"\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Postal Codes (comma-separated)\"\n                value={newZone.postalCodes}\n                onChange={(e) => setNewZone({ ...newZone, postalCodes: e.target.value })}\n                suppressHydrationWarning\n                className=\"px-4 py-2 bg-[#0A1A2F] border border-white/5 rounded-lg text-white placeholder-[#C6CFD9] focus:outline-none focus:border-[#32CE7A]/40\"\n              />\n            </div>\n            <button\n              onClick={handleAddZone}\n              disabled={loading || !newZone.city || !newZone.province}\n              className=\"px-4 py-2 bg-[#32CE7A] hover:bg-[#2AB869] text-white font-semibold rounded-lg transition-colors disabled:opacity-50\"\n            >\n              Add Zone\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Business Hours */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Business Hours</h2>\n        <div className=\"p-4 bg-[#050B12] border border-white/5 rounded-lg text-[#C6CFD9] text-sm\">\n          Business hours management coming soon\n        </div>\n      </div>\n\n      {/* Stripe Connect */}\n      <div className=\"bg-[#0A1A2F] border border-white/5 rounded-xl p-6\">\n        <h2 className=\"text-xl font-semibold text-white mb-4\">Stripe Connect</h2>\n        <div className=\"p-4 bg-[#050B12] border border-white/5 rounded-lg\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-white font-medium mb-1\">Connection Status</div>\n              <div className=\"text-sm text-[#C6CFD9]\">\n                {organization.stripe_connect_account_id ? 'Connected' : 'Not Connected'}\n              </div>\n            </div>\n            {!organization.stripe_connect_account_id && (\n              <button\n                disabled\n                className=\"px-4 py-2 bg-[#050B12] border border-white/5 rounded-lg text-[#C6CFD9] text-sm\"\n              >\n                Connect Stripe (Coming Soon)\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","/* __next_internal_action_entry_do_not_use__ [{\"709b06963c171009acfd83a588612fc384c4a8e416\":\"updateOrganizationProfile\"},\"cleanswift/web-dashboard/app/detailer/settings/organization/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateOrganizationProfile=/*#__PURE__*/createServerReference(\"709b06963c171009acfd83a588612fc384c4a8e416\",callServer,void 0,findSourceMapURL,\"updateOrganizationProfile\");","/* __next_internal_action_entry_do_not_use__ [{\"603770e5a48b96d8d00ad458991787563799043663\":\"addServiceZone\"},\"cleanswift/web-dashboard/app/detailer/settings/organization/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var addServiceZone=/*#__PURE__*/createServerReference(\"603770e5a48b96d8d00ad458991787563799043663\",callServer,void 0,findSourceMapURL,\"addServiceZone\");","/* __next_internal_action_entry_do_not_use__ [{\"606f0f38e051e50ed1610101cd1cc4fb871c1aa6af\":\"deleteServiceZone\"},\"cleanswift/web-dashboard/app/detailer/settings/organization/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteServiceZone=/*#__PURE__*/createServerReference(\"606f0f38e051e50ed1610101cd1cc4fb871c1aa6af\",callServer,void 0,findSourceMapURL,\"deleteServiceZone\");"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}